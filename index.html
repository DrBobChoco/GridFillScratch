<!DOCTYPE html>
<html>
<head>
	<title>Grid fill layout test</title>
	<style type="text/css">
		#gridOuter {
			border: 1px solid #444;
			width: 480px;
			height: 480px;
		}
		#gridOuter div {
			width: 30px;
			height: 30px;
			float: left;
			border: 1px solid #444;
		}
		.block {
			background-color: #444;
		}
		.rowStart {
			clear: both;
		}
	</style>
	<script src="jquery-1.10.2.js"></script>
	<script>
		layoutInfo = [
			[1,0,1,0,1,0,1,0,1,1,1,0,1,0,1],
			[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
			[1,0,1,0,1,0,1,0,1,1,1,0,1,0,1],
			[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0],
			[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
			[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0],
			[1,1,1,0,1,1,1,0,1,0,1,1,1,0,1],
			[0,0,0,0,0,0,0,1,0,0,0,0,0,0,0],
			[1,0,1,1,1,0,1,0,1,1,1,0,1,1,1],
			[0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],
			[1,0,1,0,1,0,1,0,1,0,1,0,1,0,1],
			[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],
			[1,0,1,0,1,1,1,0,1,0,1,0,1,0,1],
			[0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],
			[1,0,1,0,1,1,1,0,1,0,1,0,1,0,1],
		];
	</script>
</head>
<body>
	<h1>Layout Test</h1>
	<div id="gridOuter"></div>
<script>
function groupClues() {
	currClue = 1;
	for(row=1; row<=15; row++) {
		for(col=1; col<=15; col++) {
			clueStart = false;

			if($('#gridOuter [row="' + row + '"][col="' + col + '"]')[0] &&
				(row == 1 || !$('#gridOuter [row="' + (row-1) + '"][col="' + col + '"]')[0]) &&
				$('#gridOuter [row="' + (row+1) + '"][col="' + col + '"]')[0]) {

				clueStart = true;
				clueRow = row;
				do {
					$('#gridOuter [row="' + clueRow + '"][col="' + col + '"]').attr('down', currClue);
					clueRow++;
				} while($('#gridOuter [row="' + clueRow + '"][col="' + col + '"]')[0]);
			}

			if($('#gridOuter [row="' + row + '"][col="' + col + '"]')[0] &&
				(col == 1 || !$('#gridOuter [row="' + row + '"][col="' + (col-1) + '"]')[0]) &&
				$('#gridOuter [row="' + row + '"][col="' + (col+1) + '"]')[0]) {

				clueStart = true;
				clueCol = col;
				do {
					$('#gridOuter [row="' + row + '"][col="' + clueCol + '"]').attr('across', currClue);
					clueCol++;
				} while($('#gridOuter [row="' + row + '"][col="' + clueCol + '"]')[0]);
			}

			if(clueStart) {
				$('#gridOuter [row="' + row + '"][col="' + col + '"]').text("" + currClue);
				currClue++;
			}
		}
	}
}

$(function(){
	for(row=0; row<15; row++) {
		for(col=0; col<15; col++) {
			if(layoutInfo[row][col]) {
				cellClass = "block";
				rowCol = '';
			} else {
				cellClass = "space";
				rowCol = 'row="' + (row+1) + '" col="' + (col+1) + '" ';
			}
			if(col == 0) {
				cellClass += " rowStart";
			}
			$("#gridOuter").append('<div ' + rowCol + 'class="' + cellClass + '"></div>');
		}
	}
	groupClues();
	$(".space").on("click", function(){
		console.log("Click on r" + $(this).attr("row") + ",c" + $(this).attr("col"));
		$("#gridOuter .space").css("background-color", "white");
		$(this).css("background-color", "yellow");
	});
});
</script>
</body>
</html>
